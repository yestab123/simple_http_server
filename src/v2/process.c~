int connect_init(int fd,struct connect_status *cli){
  cli->fd=fd;
  cli->phase=CONNECT_INIT_PHASE;
  cli->status=404;
  cli->rpc.way=NULL;
  cli->rpc.path=NULL;
  cli->rpc.version=NULL;
  memset(cli->buffer,'\0',500);
  cli->buffer_size=0;
  cli->send=NULL;
  send_size=0;
  send_done;
  return OK;
}

int recv_data(int fd,struct connect_status *cli){
  int i=0;
  do{
  i=recv(fd,(cli->buffer + cli->buffer_size),(MAXSIZE - cli->buffer),0);
  if(-1==i){
    return -1;}
  cli->buffer_size += i;
  }while(i!=0);
  return OK;
}

int send_data(int fd,struct connect_status *cli){
  int i=0;
  while((cli->send_size - cli->send_done) != 0){
    i=send(fd,(cli->send + cli->send_done),(cli->send_size - cli->send_done),MSG_NOSIGNAL);
    if(-1 == i){
      if(errno==EPIPE){
	return CLOSE;
      }
      else
	return -1;
    }
    cli->send_done += i;
  }
  return OK;
}
    
